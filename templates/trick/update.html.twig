{% extends "base.html.twig" %}

{% block title %}
	Modifier un trick
{% endblock %}

{% block body %}
	<section id="trick-update" class="container">
		{# trick name and first picture #}
		<div class="row">
			<h1 class="col-12 text-center mt-5">Modifier le trick :</h1>
			<h2 class="col-12 text-center mt-2 mb-3">{{ trick.name|upper }}</h2>
		</div>
		<div class="row d-flex flex-nowrap justify-content-center first-image mt-3">
			{% set firstPicture = trick.firstPicture ? trick.firstPicture.filename : (trick.pictures|length > 0 ? trick.pictures[0].filename : 'default.jpg') %}
			{% set firstPictureAlt = trick.firstPicture ? trick.firstPicture.alt : null %}
			<picture>
				<source srcset="{{ asset('uploads/images/540/' ~ firstPicture) }}" media="(max-width: 578px)" type="image/jpg">
				<source srcset="{{ asset('uploads/images/720/' ~ firstPicture) }}" media="(max-width: 800px)" type="image/jpg">
				<img src="{{ asset('uploads/images/960/' ~ firstPicture) }}" class="img-fluid" alt="{{ firstPicture }} photo pour illustrer le trick de snowboard {{ trick.name }}"/>
			</picture>
			<div id="first-image-icons" class="align-self-start d-flex flex-nowrap">
				<a href="#" class="btn btn-outline-primary btn-sm mr-2" data-toggle="tooltip" data-placement="bottom" title="Modifier l'image à la une">
					<i class="fas fa-pencil-alt"></i>
				</a>
				<a href="#" class="btn btn-outline-primary btn-sm mr-2" data-delete data-trick="{{ trick.name }}" data-toggle="tooltip" data-placement="bottom" title="Supprimer l'image à la une">
					<i class="fas fa-trash-alt"></i>
				</a>
			</div>
		</div>
		{# Modal Page to change the trick's first image #}
		{#################################################}

        

		{# medias #}
		{# pictures and videos #}
		<div class="row d-flex mt-2"> 
        {# width > 720px #}
			<div class="d-none d-md-block col-sm-12 col-md-7 col-lg-6 text-left">
				{% for picture in trick.pictures %}
					<div class="d-inline-block mb-2">
						<img width="160px" src="{{ asset('uploads/images/200/' ~ picture.filename) }}" alt="{{ picture.alt }} photo pour illustrer le trick de snowboard {{ trick.name }}." class="img-thumbnail rounded"/>
						{{ include('fragments/_icons-media.html.twig', { hrefUpdate: '#', hrefDelete: '#', media: 'photo'}) }}
					</div>
				{% endfor %}
				<div class="row justify-content-center mt-2">
					<button class="btn btn-add btn-sm">Ajouter une photo</button>
				</div>
			</div>
			<div class="d-none d-md-block col-sm-12 col-md-5 col-lg-6 text-right">
				{% for video in trick.videos %}
					<div class="d-inline-block mb-2">
						{{ include('fragments/_iframe.html.twig', {width: 210, height: 118}) }}
						{{ include('fragments/_icons-media.html.twig', { hrefUpdate: '#', hrefDelete: '#', media: 'vidéo'}) }}
					</div>
				{% endfor %}
				<div class="row justify-content-center mt-2">
					<button class="btn btn-add btn-sm">Ajouter une vidéo</button>
				</div>
			</div>
			{# width < 720px #}
			<div class="d-block d-md-none col-12 text-center mt-3">
				{% if trick.pictures|length > 0 %}
					<p>
						<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapsePicturesUpdate" aria-expanded="false" aria-controls="collapsePictures">
							Voir Photos
						</button>
					</p>
				{% endif %}
				<div class="collapse mb-4" id="collapsePicturesUpdate">
					{% for picture in trick.pictures %}
						<div class="d-inline-block">
							<img src="{{ asset('uploads/images/200/' ~ picture.filename) }}" alt="{{ picture.alt }} , photo pour illustrer le trick de snowboard {{ trick.name }}" class="img-thumbnail rounded"/>
							{{ include('fragments/_icons-media.html.twig', { hrefUpdate: '#', hrefDelete: '#', media: 'photo'}) }}
						</div>
					{% endfor %}
				</div>
				<div class="row justify-content-center m-3">
					<button class="btn btn-add btn-sm">Ajouter une photo</button>
				</div>
			</div>
			<div class="d-block d-md-none col-12 text-center">
				{% if trick.videos|length > 0 %}
					<p>
						<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseVideosUpdate" aria-expanded="false" aria-controls="collapseVideos">
							Voir Vidéos
						</button>
					</p>
				{% endif %}
				<div class="collapse" id="collapseVideosUpdate">
					{% for video in trick.videos %}
						<div class="d-inline-block mt-2">
							{{ include('fragments/_iframe.html.twig', {width: 210, height: 118}) }}
							{{ include('fragments/_icons-media.html.twig', { hrefUpdate: '#', hrefDelete: '#', media: 'vidéo'}) }}
						</div>
					{% endfor %}
					
				</div>
				<div class="row justify-content-center">
					<button class="btn btn-add btn-sm">Ajouter une vidéo</button>
				</div>
			</div>
		</div>

        {{ form_start(form) }}

		{# description #}
        <hr class="mt-5">
        <div class="row justify-content-center ">
            <h2 class="col-12 text-center mt-2 mb-3">{{ trick.name|upper }}</h2>
            <p>
                Créé le
                <span class="font-weight-bold">{{ trick.createdAt|date('d/m/Y') }}</span>, et modifié le
                <span class="font-weight-bold">{{ trick.updatedAt|date('d/m/Y') }}</span>
            </p>
            <div class="col-sm-12 col-lg-9 mb-3">
                {{ form_label(form.description) }}
                {{ form_widget(form.description, {attr: {'class': 'col-12', 'rows': '10'}}) }}
            </div>
            <div class="col-sm-12 col-lg-9 mb-5">
                <div class="row">
                    {{ form_label(form.groupTrick, 'Modifier le groupe : ', {'label_attr': {'class': 'col-12'}}) }}
                    {{ form_widget(form.groupTrick, {'attr': {'class': 'mb-4 mb-md-0 ml-4 col-6 col-sm-4'}}) }}
                </div>
                <div class="row justify-content-end mb-5 ">
                    <a href="{{ path('trick_delete', {uuid: trick.uuid}) }}" type="button" class="btn btn-delete mt-2 mr-2">Supprimer le Trick</a>
                    <button type="submit" class="btn btn-primary mr-2 mt-2">Enregistrer le modifications</button>
                </div>
            </div>
        </div>
        {# Modal Page to delete the trick #}
        {###################################}
            
        
        
        

	</section>

{% endblock %}

{% block javascripts %}
	<script src="{{ asset('js/trick-new.js') }}"></script>
{% endblock %}
